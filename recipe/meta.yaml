package:
    name: eman-deps-dev
    version: '24.1'

build:
    number: 2
    skip: True  # [win32]

requirements:
    run:
        - {{ pin_subpackage('eman-deps', exact=True) }}
        - cmake          3.14.*

test:
  commands:
    - echo "TESTING eman-deps-dev"

outputs:
  - name: eman-deps
    requirements:
      run:
        - {{ pin_subpackage('eman-deps-cli', exact=True) }}
        - pyqt           5.*
        - pyopengl       3.1.5

      run_constrained:
        - cmake          3.14.*

    test:
      commands:
        - echo "TESTING eman-deps"

  - name: eman-deps-cli
    requirements:
      run:
        - {{ pin_subpackage('eman-deps-cxx', exact=True) }}
        - matplotlib    >3.0.0
        - scipy          1.*
        - ipython
        - scikit-learn
        - pandas
        - tensorflow-gpu 2.*                # [linux]
        - cudatoolkit                       # [linux]
        - cudnn          7                  # [linux]
        - tensorflow     2.*                # [osx or win]
        - bsddb3         6.2.6
        - pydusa         1.15 *_17          # [not win]
        - nose
        - future
        - configparser
        - tqdm

    test:
      commands:
        - echo "TESTING eman-deps-cli"

  - name: eman-deps-cxx
    requirements:
      run:
        - python         3.7.*
        - boost          1.69.*                # [win]
        - boost          1.69.* *_0            # [not win]
        - boost-cpp      1.69.* *_0            # [not win]
        - fftw           3.3.8  mpi_openmpi_*  # [not win]
        - fftw           3.3.8  nompi_*        # [win]
        - numpy          1.17
        - ftgl
        - freetype
        - gsl            2.4.*
        - hdf5           1.8.18
        - jpeg
        - libtiff        4.0.9
        - libpng         1.6.37
        - libdb          6.1.26
        - zlib
        - openmpi        3                     # [not win]

    test:
      commands:
        - echo "TESTING eman-deps-cxx"

about:
  summary: Meta-package for eman2 dependencies
